{% extends 'base.html' %}
{% load staticfiles %}
{% load bootstrap %}

{% block title %} Listado de solicitudes {% endblock %}
{% block contenido %}

<link rel="stylesheet" href="{% static 'plugins/datatables/dataTables.bootstrap.css' %}">
<script src="{% static 'plugins/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'plugins/datatables/dataTables.bootstrap.min.js' %}"></script>

<style>
	.select2-container .select2-selection--single .select2-selection__rendered{
		margin-top: 0px;
	}
	.nav-tabs-custom > .nav-tabs > li.active{
		border-top-color:#00a65a;
	}
	.sub-style {
		font-family: Tahoma, Verdana, Segoe, sans-serif;
		color: #269AFF;
		font-size: 12;
		font-weight: bold;
	}
</style>


<div class="box box-primary">


	<div class="box-body ">
	<p class="pull-right">Fecha: {% now 'd-m-Y' %}</p>
	 
	 <!-- page-header -->
			<p class="text-center sub-style">LISTA DE TICKETS INGRESADOS AL SISTEMA</p><hr>

	<table id="tabla" class="table table-bordered table-hover table-responsive">
		
		<thead>
					 
							<tr>
								<th>#</th>
								<th>TITULO</th>
								<th>PROYECTO</th>
								<th>PRIORIDAD</th>                        
								{% if request.user.is_superuser %}
								<th>ESTADO</th>
								<th>ASIGNADO A:</th>                
								{% endif %}                                      
								<th>OPCIONES</th>  
							</tr>     

					</thead>
		<tbody>
			{% if lista %}
							{% for data in lista %}            
						<tr>
							<td>{{ data.id }}</td>
							<td>{{ data.titulo }}</td>
							<td>{{ data.codProyecto }}</td>
							<td>{{ data.prioridad }}</td>               
							{% if request.user.is_superuser %}
							<td>{{ data.codEstado }}</td>
							<td>{{ data.asignadoA }}</td>
							{% endif %}
						 
							<td> 
								
									<div  class="dropdown">
											<button  class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
												<span class="glyphicon glyphicon-align-justify"></span>
											</button>
											<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
												
												<li><a href="{% url 'ticket_editar' data.id %}">Editar</a></li>
												
												<li><a data-toggle="modal" data-target="#myModal" href="" class="">Cerrar Ticket</a></li>
											 
											</ul>
									</div>
									
								</td>          

						</tr> 
							{% endfor %}
							{% else %}
							<h4>no hay Registros</h4>
						{% endif %}					
		
		</tbody>
	</table>

	</div>
</div>




<div class="container">

	

	<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog">
			<div class="modal-content">

				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">Modal Heading</h4>
				</div>

				<div class="modal-body">        
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>

			</div>
		</div>
	</div>

	<div id="myModal2" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel2">Modal Heading</h4>
				</div>
				
			</div>
		</div>
	</div>
 



</div>

<script type="text/javascript">
	$(document).ready(function() {
		$("#tabla").DataTable();
	
	})
</script>
<!-- JavaScript Test -->
<script>
var firefoxTestDone = false
function reportFirefoxTestResult(result) {
	if (!firefoxTestDone) {
		$('#ff-bug-test-result')
			.addClass(result ? 'text-success' : 'text-danger')
			.text(result ? 'PASS' : 'FAIL')  
	}
	firefoxTestDone = true
}

$(function () {
	$('.js-popover').popover()
	$('.js-tooltip').tooltip()
	$('#tall-toggle').click(function () {
		$('#tall').toggle()
	})
	$('#ff-bug-input').one('focus', function () {
		$('#myModal2').on('focus', function () {
			reportFirefoxTestResult(false)
		})
		$('#ff-bug-input').on('focus', function () {
			reportFirefoxTestResult(true)
		})
	})
})
</script>

{% endblock %}
